# ADR-006: Web フレームワークとして Gin を採用

## ステータス

Accepted

## コンテキスト

REST API を構築するにあたり、Web フレームワークを選定する必要があった。

以下の要件を考慮した:
- 高パフォーマンス
- ミドルウェアのサポート
- ルーティングの柔軟性
- JSON の取り扱いが容易
- ドキュメントとコミュニティの充実

## 決定

**Gin** を採用する。

```go
r := gin.New()
r.Use(middleware.Logger())
r.GET("/api/v1/voices", handler.ListVoices)
```

## 選択肢

### 選択肢 1: Gin

- **メリット**
  - GitHub Star 80k+ の人気フレームワーク
  - 高パフォーマンス（httprouter ベース）
  - 豊富なミドルウェアエコシステム
  - JSON バリデーション内蔵
  - Swagger (swaggo) との統合が容易
  - 学習リソースが豊富
- **デメリット**
  - 特になし

### 選択肢 2: Echo

- **メリット**
  - Gin と同等のパフォーマンス
  - よりモダンな API 設計
- **デメリット**
  - コミュニティは Gin より小さい

### 選択肢 3: Fiber

- **メリット**
  - 最高パフォーマンス（fasthttp ベース）
  - Express.js ライクな API
- **デメリット**
  - net/http 非互換のため一部ライブラリが使えない

### 選択肢 4: Chi

- **メリット**
  - 軽量でシンプル
  - 標準 net/http 互換
- **デメリット**
  - 機能が最小限（自分で追加が必要）

### 選択肢 5: 標準ライブラリ (net/http)

- **メリット**
  - 依存なし
- **デメリット**
  - ルーティングやミドルウェアを自作する必要あり
  - 開発効率が低い

## 理由

1. **実績**: Go Web フレームワークで最も広く使われている
2. **パフォーマンス**: httprouter ベースで十分な速度
3. **生産性**: バリデーション、バインディング、エラーハンドリングが組み込み
4. **エコシステム**: swaggo/gin-swagger など周辺ツールが充実
5. **採用実績**: 多くの企業で採用されており、情報が豊富

## 結果

- `github.com/gin-gonic/gin` を使用
- `gin.New()` でカスタムミドルウェアを設定
- `c.JSON()`, `c.ShouldBindQuery()` などの便利メソッドを活用
